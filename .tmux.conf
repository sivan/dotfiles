# é…ç½®ä½¿ç”¨å’ŒGNU Screenç›¸åŒçš„C-aä½œä¸ºå‘½ä»¤å‰ç¼€
unbind C-b
set -g prefix C-a

# ä¿®æ”¹é»˜è®¤å»¶æ—¶åˆ° 1ms 
set -sg escape-time 1

# å‘é€å‘½ä»¤å‰ç¼€åˆ°å…¶å®ƒç¨‹åº
bind C-a send-prefix

# çª—å£å’Œé¢æ¿åˆ†å‰²å·éƒ½ä»¥1å¼€å§‹ï¼ˆé»˜è®¤ä»0å¼€å§‹ï¼‰
set -g base-index 1
setw -g pane-base-index 1

# åœ¨å‘½ä»¤æ¨¡å¼ä½¿ç”¨ r é‡æ–°åŠ è½½é…ç½®
bind r source-file ~/.tmux.conf \; display "Configuration Reloaded!"

# é‡æ–°æ˜ å°„åˆ†å‰²é¢æ¿é”®
# unbind "%"
# unbind "\""
# bind | split-window -h
# bind - split-window -v

# é‡æ–°æ˜ å°„åˆ†å‰²é¢æ¿é”®å¹¶è‡ªåŠ¨è½½å…¥å½“å‰é¢æ¿è·¯å¾„
# https://github.com/edkolev/dots/blob/master/tmux.conf
if-shell "[[ `tmux -V` == *2.* ]]" 'unbind c; bind c new-window -c "#{pane_current_path}"'
if-shell "[[ `tmux -V` == *2.* ]]" "unbind '\"'; bind '\"' split-window -v -c '#{pane_current_path}'"
if-shell "[[ `tmux -V` == *2.* ]]" 'unbind %; bind % split-window -h -c "#{pane_current_path}"'
if-shell "[[ `tmux -V` == *2.* ]]" "bind - split-window -v -c '#{pane_current_path}'"
if-shell "[[ `tmux -V` == *2.* ]]" 'bind \ split-window -h -c "#{pane_current_path}"'

# é‡æ–°æ˜ å°„ç§»åŠ¨é”®
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# é‡æ–°æ˜ å°„çª—å£åˆ‡æ¢
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# è°ƒæ•´é¢æ¿å¤§å°
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# æ‰“å¼€é¼ æ ‡æ§åˆ¶
setw -g mode-mouse on
set -g mouse-select-pane on
set -g mouse-resize-pane on
set -g mouse-select-window on

# ä¸ºä¸æ”¯æŒ256è‰²çš„ç»ˆç«¯é…ç½®è‰²å½©
set -g status-utf8 on
set -g default-terminal "screen-256color"

# æ¥æ”¶å…¶å®ƒçª—å£æ´»åŠ¨
setw -g monitor-activity on
set -g visual-activity on

# å…³é—­é¢æ¿å’Œçª—å£
bind-key w kill-pane
bind-key W kill-window

# è®¾ç½®åŠ¨æ€æ ‡é¢˜æ 
set -g set-titles on
set -g set-titles-string '#S:#I.#P #W'
setw -g automatic-rename on


# ###########################################
# æŸ¥çœ‹256è‰²çš„ shell è„šæœ¬ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä½¿ç”¨
# ###########################################
# for i in {0..255} ; do
#     printf "\x1b[38;5;${i}mcolour${i}\n"
# done
# ###########################################

# æ”¹å˜çŠ¶æ€æ é¢œè‰²
set -g status-fg colour233
set -g status-bg colour154

# è®¾ç½®çŠ¶æ€æ å³éƒ¨å†…å®¹
# éœ€è¦ä½¿ç”¨è¿™é‡Œçš„å­—ä½“æ‰èƒ½æ­£ç¡®æ˜¾ç¤ºå­—ç¬¦ https://github.com/powerline/fonts
# î‚²î‚°ï¼š â—€â–¶
# î‚³î‚±ï¼š â®â¯
set -g status-right "#[fg=colour241]#[bg=colour154]î‚²#[fg=colour167]#[bg=colour241] ğŸ™ˆ  ğŸ™ˆ  #[fg=colour37]#[bg=colour241]î‚²#[fg=colour37]#[bg=colour37] ğŸ™ˆ  #[fg=colour235]#[bg=colour37]î‚²#[fg=colour172]#[bg=colour235] %F %H:%M #[default]"

# Fix OSX problem with reattach-to-user-namespace
# 1. At the end of the file `~/.tmux.conf`
# if-shell 'test "$(uname)" = "Darwin"' 'source ~/.tmux.conf'

# 2. In `~/.tmux-osx.conf`
# If you only use OS X, you can skip creating an external file, and just put the `set` line directly in your ~/.tmux.conf.
set -g default-command "reattach-to-user-namespace -l zsh"


# å¼€å¯viæŒ‰é”®
setw -g mode-keys vi

# ç»‘å®š vi å¤åˆ¶ç²˜è´´å¹¶æ‰“é€šç³»ç»Ÿç²˜è´´æ¿
bind -t vi-copy v begin-selection
# bind -t vi-copy 'y' copy-selection
bind -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"
bind "]" run "reattach-to-user-namespace pbpaste | tmux load-buffer - && tmux paste-buffer"

